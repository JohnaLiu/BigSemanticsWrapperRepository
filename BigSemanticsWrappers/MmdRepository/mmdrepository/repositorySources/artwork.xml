<meta_metadata_repository name="artwork" package="ecologylab.bigsemantics.generated.library.artwork"
                          default_user_agent_name="chrome_2">

	<meta_metadata name="artist" extends="author">
<!-- 		<collection name="mentors" child_type="artist" /> -->
		<collection name="creative_works" child_type="artwork" label="artworks"
                tag="artworks" other_tags="creative_works" child_tag="artwork" />
	</meta_metadata>


	<meta_metadata name="artwork" extends="creative_work" comment="Artwork class">
    <scalar name="location" hide="true" />
		<scalar name="description" tag="abstract" label="abstract" comment="Abstract of the work." />
		<collection name="authors" child_type="artist" label="artists"
                tag="artists" other_tags="authors" child_tag="artist"
                layer="9.5" comment="Set of artists." />
    
		<scalar name="medium" scalar_type="String" layer="9.2"
            comment="Medium on which the work is done." />
		<scalar name="year" comment="Year the work was created." scalar_type="String" />
		<scalar name="dimensions" scalar_type="String" />
	</meta_metadata>	

	<meta_metadata name="mm_artwork" extends="artwork"
                 comment="ACM Multimedia Interactive Artwork class">
		<scalar name="website" comment="Website of the work or group responsible." scalar_type="ParsedURL" />
		<scalar name="extended_abstract" comment="Link the ACM Portal page." scalar_type="ParsedURL" />
	</meta_metadata>


	<meta_metadata name="rhizome_artwork" extends="artwork"  parser="xpath">
		<selector domain="rhizome.org" url_regex_fragment="artwork" />
		<example_url url="http://rhizome.org/artbase/artwork/3272/"/>
		
		<scalar name="title" xpath="//span[@class='artwork-title span-20']/a[1]" />
		<scalar name="year" xpath="//div[@class]/ul/li[1]/span[2]"/>

		<collection name="authors" xpath="//div[@id='artist-info']/span[2]/a">
			<scalar name="location" xpath="./@href" hide="true"/>
			<scalar name="title" xpath="." />
		</collection>
		
		<scalar name="description" xpath="//div[@id='artwork-summary']"/>
		
		<collection name="related_works" child_type="artwork" label="related works" tag="related works" 
		other_tags="creative_works" child_tag="artwork" xpath="//div[@id='artwork-similar-works']/div/a">       
            <scalar name="location" xpath="./@href" hide="true"/>
			<scalar name="title" xpath="./img/@title"/>
        </collection>		
        
        <collection name="tags" child_type="rhizome_tag" label="tags" tag="tag" xpath="//div[@id='artwork-tags']/a">       
            <scalar name="location" xpath="./@href" hide="true"/>
			<scalar name="title" xpath="."/>
        </collection>    
	</meta_metadata>
	
	<meta_metadata name="rhizome_tag" extends="artist" parser="xpath">
		<selector domain="rhizome.org" url_regex_fragment="tag" />
		<example_url url="http://rhizome.org/artbase/tag/animation/"/>
 
		<collection name="creative_works" xpath="//div[@id='work']">
			<scalar name="location" xpath="./a/@href" hide="true"/>
			<scalar name="title" xpath="./div[1]"/>
			<collection name="authors" xpath="./div[2]/a">
				<scalar name="location" xpath="./@href" hide="true"/>
				<scalar name="title" xpath="." />
			</collection>		
		</collection>
	</meta_metadata>
	
	<meta_metadata name="rhizome_artist" extends="artist" parser="xpath">
		<selector domain="rhizome.org" url_regex_fragment="profile" />
		<example_url url="http://rhizome.org/profile/uiuuii/" />
		
 
		<scalar name="title" xpath="//div[@class='user-name']" />
		<scalar name="bio" tag="abstract" label="artist bio" xpath="//div[@id='profile-bio']" scalar_type="String"/>
		
		<collection name="creative_works" xpath="//div[@class='section-content span-24']/div/div[@class='portfolio-work']">
			<scalar name="location" xpath="./a/@href" hide="true"/>
			<scalar name="title" xpath="./div/a"/>
		</collection>
	</meta_metadata>
	
	<meta_metadata name="rhizome_collection" extends="artist" parser="xpath">
		<selector domain="rhizome.org" url_regex_fragment="collections" />
		<example_url url="http://rhizome.org/artbase/collections/6/" />
		
 
		<scalar name="title" xpath="//div[@id='collection-title-overlay-title']" />
		<scalar name="bio" tag="abstract" label="about" xpath="//div[@class='statement-column-content']" scalar_type="String"/>
		
		<collection name="creative_works" xpath="//div[@class='focused']">
			<!-- <scalar name="location" xpath=".//span[@class='artwork-title']/a/@href" hide="true"/>  -->
			<scalar name="description" xpath=".//div[@class='focused-description']" />
		    
		    <scalar name="year" xpath=".//span[@class='created']"/>
			<scalar name="title" xpath=".//span[@class='artwork-title']"/>
		</collection>
	</meta_metadata>	
	
	<meta_metadata name="moma_artwork" extends="artwork"  parser="xpath">
		<selector domain="moma.org" url_regex="http://(www\.)?moma.org/collection/browse_results.php[\S]*template_id=1[\S]*" />
		<selector domain="moma.org" url_regex="http://(www\.)?moma.org/collection/browse_results.php\?object_id=[\d]+" />  
		<selector domain="moma.org" url_regex="http://(www\.)?moma.org/collection/object.php\?object_id=[\d]+" />
		<example_url url="http://www.moma.org/collection/object.php?object_id=78311" />
		
		<scalar name="title" xpath="//div[@id='omniture_caption']/h3" />

		<scalar name="year" xpath="//dl[@class='caption']/dd[1]"/>
		<scalar name="medium" xpath="//dl[@class='caption']/dd[2]"/> 
	 
		<collection name="authors" xpath="//h4[@class='artist']/a">
			<scalar name="location" xpath="./@href" hide="true"/>
			<scalar name="title" xpath="." />
		</collection> 
		
		<scalar name="status" scalar_type="String" xpath="//div[@class='status']/strong" />
		<composite name="moma_department" type="compound_document" label="department"
               xpath="//div[@class='item']/h4[contains(text(), 'Department:')]/../div/a">
			<scalar name="title" xpath="." label="name"/>
			<scalar name="location" xpath="./@href" />
		</composite>
		
		<composite name="moma_classification" type="compound_document" label="classification"
               xpath="//div[@class='item']/h4[contains(text(), 'Classification:')]/../div/a">
			<scalar name="title" xpath="." label="name"/>
			<scalar name="location" xpath="./@href" />
		</composite>
		<scalar name="year" xpath="//div[@class='item']/h4[contains(text(), 'Date:')]/../span" />
		
		<scalar name="permalink" scalar_type="ParsedURL" hide="true"
            xpath="//div[@class='item']/h4[contains(text(), 'Permalink:')]/../div/a/@href" />
		<scalar name="database_link" scalar_type="ParsedURL" hide="true"
            xpath="//div[@class='item']/h4[contains(text(), 'Resources:')]/../div/a/@href" />
		<scalar name="moma_id" scalar_type="String" xpath="//p[@class='caption'][2]" />
		
		<!-- make image -->
		<scalar name="image" scalar_type="ParsedURL" hide="true"
            xpath="//p[@id='mainImage']/img/@src" />
		
		<composite name="temp_field_value_holder" extends="metadata" hide="true"
               xpath="//p[@class='caption'][1]">
			<field_parser name="regex_find" regex="(\S.+?)\. " />
			<scalar name="temp_year" scalar_type="String" field_parser_key="$0">
				<filter regex="[().]*" replace="" />
			</scalar>
			<scalar name="temp_medium" scalar_type="String" field_parser_key="$1">
				<filter regex=", \d.+" replace="" />
			</scalar>
			<scalar name="temp_dimensions" scalar_type="String" field_parser_key="$1">
				<filter regex="\S.+, " replace="" />
			</scalar>
		</composite>
		
		<semantic_actions>
			<get_field name="permalink" />
			<set_field name="location" value="permalink" />
		
			<get_field name="temp_field_value_holder" />
			<if>
				<not_null value="temp_field_value_holder" />
<!-- 				<get_field name="temp_year" object="temp_field_value_holder" /> -->
<!-- 				<set_field name="year" value="temp_year" /> -->
				<get_field name="temp_medium" object="temp_field_value_holder" />
				<set_field name="medium" value="temp_medium" />
				<get_field name="temp_dimensions" object="temp_field_value_holder" />
				<set_field name="dimensions" value="temp_dimensions" />
			</if>
			
<!-- 			<get_field name="image_url"/> -->
<!-- 			<create_and_visualize_img_surrogate> -->
<!-- 				<arg name="image_purl" value="image_url" />			 -->
<!-- 			</create_and_visualize_img_surrogate>  -->
			
			<get_field name="title"/>
			<create_and_visualize_text_surrogate>
				<arg name="text" value="title" />
			</create_and_visualize_text_surrogate>
			
		</semantic_actions>
	</meta_metadata>


	<meta_metadata name="moma_list" type="search" parser="xpath">
    <generic_type_var name="SR" arg="moma_artwork" />
    
    
		<selector domain="moma.org" url_regex="http://(www\.)?moma.org/collection/browse_results.php[\S]*template_id=6[\S]*" />
    
		<collection name="search_results" xpath="//ul[@id='thumbnail-view-items']/li">
      <scalar name="title" xpath=".//div[@class='description']/div" />
			<scalar name="location" xpath="./a/@href" />
		</collection>
  </meta_metadata>
		
	<meta_metadata name="moma_artist" extends="artist" parser="xpath">
		<selector url_stripped="http://www.moma.org/collection/artist.php" />
		<example_url url="http://www.moma.org/collection/artist.php?artist_id=4675" />
		<!-- add image -->
		
		<scalar name="title" xpath="//h2[@class='pagetitle']" />
		<collection name="creative_works" xpath="//ul[@id='thumbnail-view-items']/li/div/div">
			<scalar name="location" xpath="./a[2]/@href" hide="true"/>
			<scalar name="title" xpath="./div/i"/>
		</collection>
	</meta_metadata>	
		
	<meta_metadata name="tate_artwork" extends="artwork"  parser="xpath">
		<selector url_path_tree="http://www.tate.org.uk/art/artworks/" />
		<example_url url="http://www.tate.org.uk/art/artworks/guerrilla-girls-no-title-p78793" />
	 	<example_url url="http://www.tate.org.uk/art/artworks/fontana-spatial-concept-waiting-t00694" />
		
		<scalar name="title" xpath="//span[@class='title']" />
		<scalar name="year" xpath="//span[@class='datetext']"/>
		<scalar name="medium" xpath="//span[@class='infoValue infoMedium']"/>
		
		<collection name="authors" xpath="//div[@class='infoWorkArtist infoValue']">
			<scalar name="location" xpath="./a/@href" hide="true"/>
			<scalar name="title" xpath=".//span[@class='infoWorkArtName']" />
		</collection>
		
		<scalar name="description" xpath="//div[@class='texts_content']"/>
		
		<collection name="works_of_interest" child_type="artwork" label="works of interest" tag="related works" 
		other_tags="creative_works" child_tag="artwork" xpath="//div[@class='carousel-clip']/div/div/div[2]/div[2]/a">       
            <scalar name="location" xpath="./@href" hide="true"/>
			<scalar name="title" xpath="./span"/>
        </collection>		
        
        <collection name="tags" child_type="tate_filter" label="tags" tag="tag" xpath="//span[@class='tag']/a">       
            <scalar name="location" xpath="./@href" hide="true"/>
			<scalar name="title" xpath="."/>
        </collection>    
	</meta_metadata>
 
	<meta_metadata name="tate_filter" extends="artist" parser="xpath">
		<selector url_stripped="http://www.tate.org.uk/art/artworks" />
 		<example_url url="http://www.tate.org.uk/art/artworks?st=227" />
 
		<collection name="creative_works" xpath="//div[@class='grid-work-text']">
			<scalar name="location" xpath="./div[2]/a/@href" hide="true"/>
			<scalar name="title" xpath="./div[2]/a/span"/>
			<collection name="authors" xpath="./div[2]/a">
				<scalar name="title" xpath="./div[1]" />
			</collection>		
		</collection>
	</meta_metadata>
	
	<meta_metadata name="tate_artist" extends="artist" parser="xpath">
		<selector domain="tate.org.uk" url_regex_fragment="artists" />
 		<example_url url="http://www.tate.org.uk/art/artists/cy-twombly-2079" />
 
 
		<scalar name="title" xpath="//div[@class='region-inner region-header-second-inner']/h1/span[1]" />
		<scalar name="bio" tag="abstract" label="artist bio" xpath="//div[@class='texts_content']/p[1]" scalar_type="String"/>
		
		<collection name="creative_works" xpath="//div[@class='carousel-clip']/div/div/div[2]/div[2]/a">       
            <scalar name="location" xpath="./@href" hide="true"/>
			<scalar name="title" xpath="./span"/>
        </collection>	
	</meta_metadata>
	
	<meta_metadata name="met_artwork" extends="artwork"  parser="xpath">
  				
		<selector domain="metmuseum.org" url_regex_fragment="http://www.metmuseum.org/collections/search-the-collections/\d+" />
		<selector domain="metmuseum.org" url_regex_fragment="http://www.metmuseum.org/Collections/search-the-collections/\d+" />
				
		<example_url url="http://www.metmuseum.org/Collections/search-the-collections/488690" />
		
		<scalar name="title" xpath="//div[@class='text-box first cleared ']/h2" />
		
		<!-- special characters (dash) get deleted -->
		<example_url url="http://www.metmuseum.org/Collections/search-the-collections/436576" />
		<scalar name="year" xpath="(//dd[preceding-sibling::dt[contains(text(),'Date:')]])[1]"/>
		
		<scalar name="medium" xpath="(//dd[preceding-sibling::dt[contains(text(),'Medium:')]])[1]"/>
		
		<collection name="authors" xpath="//dt[text()='Who']/../dd[1]/ul/li/a">
			<scalar name="location" xpath="./@href" hide="true"/>
			<scalar name="title" xpath="." />
		</collection>
		
		<scalar name="description" xpath="//a[contains(text(),'Description')]/../div/div/p"/>
		
		<collection name="works_of_interest" child_type="met_artwork" label="related works" tag="related works" 
		other_tags="creative_works" child_tag="artwork" xpath="//div[@class='object-info']/p/a">       
            <scalar name="location" xpath="./@href" hide="true"/>
			<scalar name="title" xpath="."/>
        </collection>		
         
        <collection name="tags" child_type="met_filter" label="tags" tag="tag" xpath="(//div[@class='accordion-inner'])[last()]/dl/dd/ul/li/a">       
            <scalar name="location" xpath="./@href" hide="true"/>
			<scalar name="title" xpath="."/>
        </collection> 
            
	</meta_metadata>

	<meta_metadata name="met_filter" extends="artist" parser="xpath">		
		<selector url_stripped="http://www.metmuseum.org/collections/search-the-collections">
  			<param name="who" />
		</selector>	
		
		<selector url_stripped="http://www.metmuseum.org/collections/search-the-collections">	
		  	<param name="where" />
		</selector>	
  		
  		<selector url_stripped="http://www.metmuseum.org/collections/search-the-collections">			
  			<param name="what" />
  		</selector>
  		
  		<selector url_stripped="http://www.metmuseum.org/collections/search-the-collections">		
  			<param name="when" />
  		</selector>
  		
  		<selector url_stripped="http://www.metmuseum.org/collections/search-the-collections">		
  			<param name="deptid" />
 		</selector>
 		<example_url url="http://www.metmuseum.org/collections/search-the-collections?what=Metal"/>
 
		<collection name="creative_works" xpath="//div[@class='search-results-container cleared visible']/ul/li">
			<scalar name="location" xpath="./div[2]/p/a/@href" hide="true"/>
			<scalar name="title" xpath="./div[2]/p/a"/>
			<!-- can't figure out
			<collection name="authors" xpath="./div[2]/a">
				<scalar name="title" xpath="./div[1]" />
			</collection>
			-->		
		</collection>
	</meta_metadata>	
		
	<!-- supports very little due to url structure of site -->	
	<meta_metadata name="whitney_art" extends="artwork"  parser="xpath">			
		<selector url_path_tree="http://whitney.org/Collection/" />	
		<example_url url="http://whitney.org/Collection/OscarBluemner/6766" />
		
		<scalar name="title" xpath="//title" />
		<scalar name="year" xpath="//*[@class='artwork-dates']"/>
	</meta_metadata>	
		
</meta_metadata_repository>